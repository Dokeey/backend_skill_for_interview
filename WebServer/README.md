# 목차 - 웹 서버

- Apache
  - [쓰레드 방식](#쓰레드-방식)
- Nginx
  - [사용한 이유](#사용한-이유)
  - [한계와 대처방안](#한계와-대처방안)
  - [Event-Driven 방식](#event-driven-방식)




# :white_check_mark: 웹 서버

## Apache

### 쓰레드 방식

![image](https://user-images.githubusercontent.com/38549761/103328950-16a2fa80-4a9e-11eb-888d-4da56490b4f9.png)

아파치는 웹 서버의 대표적인 예로 Client에서 받은 **요청당 하나의 프로세스 혹은 쓰레드를 생성하는 구조**의 작동방식을 가지고 있다.

이 때문에 클라이언트 수가 많아질수록 서버의 자원을 매우 필요로 하고 대용량 처리에 쉽게 한계를 느낄 수 있다.

## Nginx

### 사용한 이유

1. AWS 및 헤로쿠 서비스에서 많이 활용되며 이에 따라 많은 레퍼런스와 자료가 있어 쉽게 접근하고 설정할 수 있었다.
2. Apache와 비교하여 서버의 자원을 효율적으로 사용하고 버퍼 오버플로우와 같은 문제도 어느정도 해결할 수 있다는 이점이 있었다.



### 한계와 대처방안

아파치에 비해 다양한 **모듈이 부족**하다는 점과 **동적 컨텐츠를 기본적으로 처리 할 수 없다**는 것이다. 

이에 대한 문제는 자신의 서비스가 어떤 서비스인지 먼저 파악하고 **적합한 서버를 선택**하는 것이 맞다고 본다. 

혹은 Apache 앞에 **Nginx를 프록시 서버로 배치**하여 모든 클라이언트 요청에 대해 Nginx가 처리하고 일부 동적 컨텐츠가 포함한 요청은 Apache로 프록시하여 결과를 처리하며 함께 사용할 수 있을 것 같다.



### Event Driven 방식

![image](https://user-images.githubusercontent.com/38549761/103328987-3c300400-4a9e-11eb-910a-08636972ee0f.png)

Nginx는 Event-Driven 방식으로 동작한다.
한 개 또는 고정된 프로세스만 생성 하고, 그 프로세스 내부에서 비동기 방식으로 효율적으로 작업을 처리한다. 따라서 동시 접속 요청이 많아도 **Process 또는 Thread 생성 비용이 존재하지 않는다**.

