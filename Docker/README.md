# 목차 - Docker

- 사용한 이유
- 한계와 대처방안
- 개념

  1. [도커란?](#도커란)
  2. [레이어 계층](#레이어-계층)



# :white_check_mark: Docker

## 사용한 이유

1. 도커 이미지를 실행시키는 시점이 항상 같고 변하지 않기 때문에 개발 환경, 프로덕션 환경 등을 나누어 관리하고 활용할 수 있다.
2. AWS나 헤로쿠 등 클라우드 서버 플랫폼에서도 도커를 사용하면 생각보다 편하고 관리하기 쉬운 배포를 할 수 있다.



## 한계와 대처방안

도커는 기본적으로 Linux 기반 OS에서 사용한다. Linux 개발환경이 익숙하지 않거나, Windows 환경에서 개발해야하는 프로젝트라면 시행착오가 필요할 수 있다. 하지만 도커 실행을 위한 도커 유틸리티가 많이 있기 때문에 이를 활용하여 사용할 수 있다.



## 개념

### 도커란?

![image](https://user-images.githubusercontent.com/38549761/103190929-47582800-4916-11eb-83f1-1f52902fc338.png)

컨테이너 기반의 가상화 도구이다.

이전 가상 머신은 하드웨어를 소프트웨어로 가상화하는 방식을 사용했다. 가상머신은 완전한 컴퓨터라 항상 게스트 OS를 설치해야 한다. 그래서 불필요한 오버헤드가 발생하고 이미지 안에 OS가 포함되기 때문에 이미지 용량이 커진다.

컨테이너는 프로세스를 격리시켜 동작하는 방식이다. 애플리케이션을 환경에 구애 받지 않고 실행하는 기술이다. 도커 엔진 위에 application 실행에 필요한 바이너리만 올라가게 된다. Host OS 위 도커 엔진 그 위에서 바로 동작하며 Host의 커널을 공유한다. 즉 Host OS가 사용하는 자원을 분리하여 여러 환경을 만들 수 있도록 하는 것이다.

컨테이너는 가상화보다 훨씬 가벼운 가상화 기술이다. 리눅스 안에 있는 컨테이너 기술(**LXC**)을 이용하여 가상공간을 만든다. 하지만, 그 만들어진 공간안에 실행파일은 호스트에서 직접 실행한다. 어찌 보면 컨테이너는 가상화가 아닌 격리의 개념과도 같다.



### 레이어 계층

![image](https://user-images.githubusercontent.com/38549761/103191008-8edeb400-4916-11eb-836e-3c1c0d5dd15b.png)

도커 이미지는 컨테이너를 실행하기 위한 모든 정보를 가지고 있기 때문에 용랑이 매우 크다. 기존 이미지에 파일 하나 추가했다고 수백메가를 다시 다운 받는 것은 매우 비효율 적이다. 이런 문제를 해결하기 위해 이미지를 **레이어** 라는 개념으로 나누어 저장한다. 이미지는 여러개의 읽기 전용 레이어로 구성되고 파일이 추가되거나 수정되면 새로운 레이어가 생성된다.

컨테이너를 생성할 때도 기존의 이미지 레이어 위에 읽기/쓰기 레이어를 추가한다. 이미지 레이어를 그대로 사용하면서 컨테이너가 실행 중에 생성하는 파일이나 변경된 내용은 읽기/쓰기 레이어에 저장되므로 여러개의 컨테이너를 생성해도 최소한의 용량만 사용한다.

